<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Fluxo Financeiro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <main class="main-content p-4 md:p-8 overflow-y-auto">
        <div class="container">
            <div class="flex justify-between items-center mb-6">
                <h2>Fluxo Financeiro (Contas a Pagar/Receber)</h2>
                <a href="index.html" class="text-blue-500 hover:underline">Voltar ao Dashboard</a>
            </div>

            <div class="kpi-grid mb-8">
                <div class="kpi-card bg-red-50">
                    <h4 class="text-red-700">A Pagar (Pendente)</h4>
                    <p id="totalPagar" class="text-red-600 font-bold">R$ 0,00</p>
                </div>
                <div class="kpi-card bg-green-50">
                    <h4 class="text-green-700">A Receber (Pendente)</h4>
                    <p id="totalReceber" class="text-green-600 font-bold">R$ 0,00</p>
                </div>
                <div class="kpi-card bg-blue-50">
                    <h4 class="text-blue-700">Saldo Pendente</h4>
                    <p id="saldoPendencias" class="text-blue-600 font-bold">R$ 0,00</p>
                </div>
            </div>

            <form id="financeiroForm" class="mb-10">
                <input type="hidden" id="idFinanceiro" value="">

                <div class="form-group">
                    <label for="descricao">Descri√ß√£o da Conta</label>
                    <input type="text" id="descricao" placeholder="Ex: Pagamento aluguel, Recebimento venda #12"
                        required>
                </div>

                <div class="form-grid-container">
                    <div class="form-group">
                        <label for="valor">Valor (R$)</label>
                        <input type="number" id="valor" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="tipo">Tipo</label>
                        <select id="tipo" required class="w-full p-2 border border-gray-300 rounded">
                            <option value="Pagar">A Pagar (Despesa)</option>
                            <option value="Receber">A Receber (Receita)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="vencimento">Data de Vencimento</label>
                        <input type="date" id="vencimento" required>
                    </div>
                </div>

                <div class="form-grid-container">
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" required class="w-full p-2 border border-gray-300 rounded">
                            <option value="Pendente">Pendente</option>
                            <option value="Pago">Quitado (Pago/Recebido)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="categoria">Categoria</label>
                        <select id="categoria" class="w-full p-2 border border-gray-300 rounded">
                            <option value="">Selecione...</option>
                            <option value="Venda">Venda</option>
                            <option value="Compra">Compra</option>
                            <option value="Operacional">Operacional</option>
                            <option value="Fornecedor">Fornecedor</option>
                            <option value="Sal√°rio">Sal√°rio</option>
                            <option value="Aluguel">Aluguel</option>
                            <option value="Impostos">Impostos</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn">Registrar no Financeiro</button>
            </form>

            <div id="statusMessage"></div>

            <div class="table-container">
                <div class="flex justify-between items-center mb-4" style="flex-wrap:wrap; gap:0.5rem;">
                    <h3>Registros Financeiros</h3>
                    <div style="display:flex; gap:0.5rem; flex-wrap:wrap; align-items:center;">
                        <input type="date" id="filtroDataInicio" class="p-2 border border-gray-300 rounded text-sm" title="Data in√≠cio">
                        <span style="font-size:0.8rem; color:#64748b;">at√©</span>
                        <input type="date" id="filtroDataFim" class="p-2 border border-gray-300 rounded text-sm" title="Data fim">
                        <button onclick="aplicarFiltros()" class="p-2 border border-gray-300 rounded text-sm bg-blue-50 hover:bg-blue-100">üîç Filtrar</button>
                        <button onclick="limparFiltros()" class="p-2 border border-gray-300 rounded text-sm">‚úï Limpar</button>
                        <select id="filtroTipo" class="p-2 border border-gray-300 rounded text-sm">
                            <option value="">Todos os Tipos</option>
                            <option value="Pagar">A Pagar</option>
                            <option value="Receber">A Receber</option>
                        </select>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Descri√ß√£o</th>
                            <th>Valor</th>
                            <th>Tipo</th>
                            <th>Vencimento</th>
                            <th>Status</th>
                            <th>Categoria</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="listaFinanceiro">
                        <tr>
                            <td colspan="8" style="text-align:center;">Carregando dados...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/financeiro.js"></script>
</body>

</html>